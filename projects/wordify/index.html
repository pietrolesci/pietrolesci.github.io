<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Wordify | Pietro  Lesci</title>
    <meta name="author" content="Pietro  Lesci" />
    <meta name="description" content="A webapp that makes it easy to identify words that discriminate categories in textual data." />
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100;0,500;1,100;1,500&display=swap">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⇒</text></svg>">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://pietrolesci.github.io/projects/wordify/">
    
    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="https://pietrolesci.github.io/"><span class="font-weight-bold">Pietro</span>   Lesci</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>
              
              <!-- Blog -->
              <li class="nav-item ">
                <a class="nav-link" href="/blog/">blog</a>
              </li>

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/projects/">projects</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/cv/">cv</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="container mt-5">
      <!-- page.html -->
        <div class="post">

          <header class="post-header">
            <h1 class="post-title">Wordify</h1>
            <p class="post-description">A webapp that makes it easy to identify words that discriminate categories in textual data.</p>
          </header>

          <article>
            <p>Wordify is a free and easy-to-use online text-analysis tool that allows everyone to use the Wordify algorithm proposed in <a href="https://academic.oup.com/jcr/article/48/3/394/6199426">Wordify: A Tool for Discovering and Differentiating Consumer Vocabularies</a> by Hovy, Dirk and Melumad, Shiri and Inman, J. Jeffrey. I built this online tool in late 2019 when I joined the <a href="https://milanlproc.github.io/">MilaNLPLab</a> of Dirk Hovy as a research assistant. Since then, I have kept maintaining it In early 2022 we deployed a new, more interactive version.</p>

<h3 id="description">Description</h3>
<p>At a high level, Wordify makes it easy to identify words that discriminate categories in textual data. For example, to understand how consumer word use varies across contexts. More specifically, Wordify, uses randomized logistic regression (RLR) to identify the words that best discriminate texts drawn from different pre-classified corpora, such as posts written by men versus women, or texts containing mostly negative versus positive valence.</p>

<p>In the paper, the authors present illustrative examples to show how the tool can be used for such diverse purposes as (1) uncovering the distinctive vocabularies that consumers use when writing reviews on smartphones versus PCs, (2) discovering how the words used in Tweets differ between presumed supporters and opponents of a controversial ad, and (3) expanding the dictionaries of dictionary-based sentiment-measurement tools. They show empirically that Wordify’s RLR algorithm performs better at discriminating vocabularies than support vector machines and chi-square selectors, while offering significant advantages in computing time. A discussion is also provided on the use of Wordify in conjunction with other text-analysis tools, such as probabilistic topic modeling and sentiment analysis, to gain more profound knowledge of the role of language in consumer behavior.</p>

<p>It currently supports the following languages: English, Italian, German, Spanish, Greek, Dutch, Portuguese, French, Danish, Lithuanian, Norvegian, Polish, Romanian, Russian, MultiLanguage, and Chinese.</p>

<h3 id="useful-links">Useful links</h3>
<p>You can find the code reposity on <a href="https://github.com/MilaNLProc/wordify-webapp-streamlit">Github</a>. The tool can be accessed on the <a href="https://wordify.unibocconi.it/">MilaNLPLab’s server</a>, the <a href="https://huggingface.co/spaces/MilaNLProc/wordify">MilaNLPLab HuggingFace Space</a>, and <a href="https://huggingface.co/spaces/pietrolesci/wordify">my personal HuggingFace Space</a>.</p>

<h3 id="implementation">Implementation</h3>
<p>Wordify is implemented entirely in Python. It is composed of 4 main parts and each part is built with domain-specific libraries. In particular:</p>

<ul>
  <li>
    <p>The UI: <code class="language-plaintext highlighter-rouge">streamlit</code></p>
  </li>
  <li>
    <p>The IO: <code class="language-plaintext highlighter-rouge">pandas</code></p>
  </li>
  <li>
    <p>The text pre-processing pipeline: <code class="language-plaintext highlighter-rouge">textacy</code>, <code class="language-plaintext highlighter-rouge">spacy</code>, and <code class="language-plaintext highlighter-rouge">vaex</code></p>
  </li>
  <li>
    <p>The machine learning engine: <code class="language-plaintext highlighter-rouge">scikit-learn</code></p>
  </li>
</ul>

<p>One of the most notable lessons-learned during the implementation is that using <code class="language-plaintext highlighter-rouge">vaex</code> to apply the computationally-heavy transformations to each text instance is the fastest solution. In particular, lemmatization with spacy is the slowest part of the text pre-processing pipeline. The suggested way to it speed-up, i.e. using the <code class="language-plaintext highlighter-rouge">nlp.pipe</code> method, is still too slow to allow for nice interactivity even on moderately large text files (5-10MB). To solve the issue, I surprisingly discovered that calling the <code class="language-plaintext highlighter-rouge">nlp</code> method to one instance at a time (!), but applying it using <code class="language-plaintext highlighter-rouge">vaex</code>, is super fast. So, I decided to “pay the price” of allocating time to cast <code class="language-plaintext highlighter-rouge">pandas</code> dataframes to <code class="language-plaintext highlighter-rouge">vaex</code>, and then back again, to gain the speed of applying the <code class="language-plaintext highlighter-rouge">nlp</code> method quickly. At a high level, I did the following</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="p">...</span>  <span class="c1"># pandas dataframe
</span><span class="n">text_column</span> <span class="o">=</span> <span class="p">...</span>  <span class="c1"># name of the column containing text
</span>
<span class="c1"># cast pandas dataframe to vaex dataframe
</span><span class="n">vdf</span> <span class="o">=</span> <span class="n">vaex</span><span class="p">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># apply function element-wise using vaex
</span><span class="n">vdf</span><span class="p">[</span><span class="s">"processed_text"</span><span class="p">]</span> <span class="o">=</span> <span class="n">vdf</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">[</span><span class="n">vdf</span><span class="p">[</span><span class="n">text_column</span><span class="p">]])</span>

<span class="c1"># cast back to pandas
</span><span class="n">df</span> <span class="o">=</span> <span class="n">vdf</span><span class="p">.</span><span class="n">to_pandas_df</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="deployment">Deployment</h3>
<p>Deployment on the MilaNLPLab’s server is done via git pulls - the app runs within a Docker container. Deployment on the HuggingFace Spaces is done via Github Actions.</p>

          </article>

        </div>

    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        &copy; Copyright 2022 Pietro  Lesci. Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.
Last updated: September 02, 2022.
      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js"></script><!-- Load Common JS -->
  <script defer src="/assets/js/common.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    // look at this https://tex.stackexchange.com/questions/27633/mathjax-inline-mode-not-rendering
    MathJax = {
      tex: {
        // tags: 'ams',
        inlineMath: [['$', '$'], ["\\(", "\\)"]],
        processEscapes: true,
      }
    };
    </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
  </body>
</html>
